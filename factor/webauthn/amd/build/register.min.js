define(["factor_webauthn/utils"],function(a){return{init:function(b){document.getElementById("id_submitbutton").disabled=!0,document.getElementById("factor_webauthn-register").addEventListener("click",function(c){if(!navigator.credentials||!navigator.credentials.create)throw new Error("Browser not supported.");c.preventDefault();const d=JSON.parse(b);if(d.success===!1)throw new Error(d.msg||"unknown error occured");a.recursiveBase64StrToArrayBuffer(d),navigator.credentials.create(d).then(function(b){const c={transports:b.response.getTransports?b.response.getTransports():null,clientDataJSON:b.response.clientDataJSON?a.arrayBufferToBase64(b.response.clientDataJSON):null,attestationObject:b.response.attestationObject?a.arrayBufferToBase64(b.response.attestationObject):null},d=document.getElementById("id_response_input");d.value=JSON.stringify(c),document.getElementById("id_submitbutton").disabled=!1,d.form.elements.submitbutton.click()})})}}});