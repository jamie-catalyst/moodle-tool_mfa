define(["factor_webauthn/utils"],function(a){return{init:function(b){document.getElementById("id_submitbutton").addEventListener("click",function(c){if(!navigator.credentials||!navigator.credentials.create)throw new Error("Browser not supported.");c.preventDefault();const d=JSON.parse(b);if(d.success===!1)throw new Error(d.msg||"unknown error occured");a.recursiveBase64StrToArrayBuffer(d),navigator.credentials.get(d).then(function(b){const c={id:b.rawId?a.arrayBufferToBase64(b.rawId):null,clientDataJSON:b.response.clientDataJSON?a.arrayBufferToBase64(b.response.clientDataJSON):null,authenticatorData:b.response.authenticatorData?a.arrayBufferToBase64(b.response.authenticatorData):null,signature:b.response.signature?a.arrayBufferToBase64(b.response.signature):null,userHandle:b.response.userHandle?a.arrayBufferToBase64(b.response.userHandle):null};document.getElementById("id_response_input").value=JSON.stringify(c),document.getElementById("id_response_input").form.submit()})})}}});